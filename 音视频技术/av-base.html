<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="音视频技术,"><meta name="description" content="一、直播架构直播可分为两大类别  泛娱乐化直播 实时互动直播  1.1 泛娱乐化直播由泛娱乐化直播通常指对实时性要求不高的直播形式，以娱乐为主，由于对实时性的要求较低，它的架构就相对简单。 由共享端(主播端)、信令服务器端、流媒体云(CDN网络)、观众端组成。 假设推拉流采用rtmp流，那么一个主播共享画面到观众的流程基本如下:  主播端发起创建房间的信令后，在信令服务器中创建房间并返回一个流媒体"><meta name="keywords" content="音视频技术"><meta property="og:type" content="article"><meta property="og:title" content="【音视频处理】音视频技术基础"><meta property="og:url" content="https://jobscn.github.io/音视频技术/av-base.html"><meta property="og:site_name" content="Jobscn&#39;s blog"><meta property="og:description" content="一、直播架构直播可分为两大类别  泛娱乐化直播 实时互动直播  1.1 泛娱乐化直播由泛娱乐化直播通常指对实时性要求不高的直播形式，以娱乐为主，由于对实时性的要求较低，它的架构就相对简单。 由共享端(主播端)、信令服务器端、流媒体云(CDN网络)、观众端组成。 假设推拉流采用rtmp流，那么一个主播共享画面到观众的流程基本如下:  主播端发起创建房间的信令后，在信令服务器中创建房间并返回一个流媒体"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sapb3scpj31700cedgv.jpg"><meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcgy1g0yn1vy08yj30pi07uwfr.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4saq6szhbj30pi07u3zo.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4saqir87sj311e05s3yz.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4saqv4e4kj30x40eajt3.jpg"><meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g4sar8vmooj30mo0ms764.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sarkg5a3j30qs0mm409.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4sartbtdmj30x60g6dh7.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4sasapmugj314k09yaav.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sasj8b4cj30pm0jowge.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sast4frvj30mg0esabn.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4sat41g7sj30xa0d8jta.jpg"><meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g4satj6qrxj31ae0d4q48.jpg"><meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g4satxe3g4j30wq0iegnl.jpg"><meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g4saucgowcj31800cuq4v.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4sav3uxxwj30v40higmj.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4savdf2anj30v80hw75f.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4saxaexxlj31700cedgv.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4saxipsffj318k0csmyy.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4saxpcj6bj315c0bwtaq.jpg"><meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNc79gy1g4saxx5g14j317i0cgdhh.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4say4gb09j30rq0hat9f.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4sayd3f3mj30q40d6abc.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4sayk6707j30vs0gajsh.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4sayr0niqj30o40himy1.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sayyla5pj30wr0u0761.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sazc8x1xj311u0gm3zv.jpg"><meta property="og:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sazlnowuj30xw0l076g.jpg"><meta property="og:image" content="http://ww1.sinaimg.cn/large/006tNc79gy1g4saztj4d7j311u0gojsy.jpg"><meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNc79gy1g4sb01ban6j30cm07u3yp.jpg"><meta property="og:updated_time" content="2019-07-08T04:14:32.758Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="【音视频处理】音视频技术基础"><meta name="twitter:description" content="一、直播架构直播可分为两大类别  泛娱乐化直播 实时互动直播  1.1 泛娱乐化直播由泛娱乐化直播通常指对实时性要求不高的直播形式，以娱乐为主，由于对实时性的要求较低，它的架构就相对简单。 由共享端(主播端)、信令服务器端、流媒体云(CDN网络)、观众端组成。 假设推拉流采用rtmp流，那么一个主播共享画面到观众的流程基本如下:  主播端发起创建房间的信令后，在信令服务器中创建房间并返回一个流媒体"><meta name="twitter:image" content="http://ww4.sinaimg.cn/large/006tNc79gy1g4sapb3scpj31700cedgv.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://jobscn.github.io/音视频技术/av-base.html"><title>【音视频处理】音视频技术基础 | Jobscn's blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Jobscn's blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">纸上得来终觉浅，绝知此事要躬行</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://jobscn.github.io/音视频技术/av-base.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Jobscn"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jobscn's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">【音视频处理】音视频技术基础</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-11T11:19:26+08:00">2019-03-11 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/音视频技术/" itemprop="url" rel="index"><span itemprop="name">音视频技术</span> </a></span></span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i> <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="一、直播架构"><a href="#一、直播架构" class="headerlink" title="一、直播架构"></a>一、直播架构</h1><p>直播可分为两大类别</p><ol><li>泛娱乐化直播</li><li>实时互动直播</li></ol><h2 id="1-1-泛娱乐化直播"><a href="#1-1-泛娱乐化直播" class="headerlink" title="1.1 泛娱乐化直播"></a>1.1 泛娱乐化直播</h2><p>由泛娱乐化直播通常指对实时性要求不高的直播形式，以娱乐为主，由于对实时性的要求较低，它的架构就相对简单。</p><p>由共享端(主播端)、信令服务器端、流媒体云(CDN网络)、观众端组成。</p><p>假设推拉流采用rtmp流，那么一个主播共享画面到观众的流程基本如下:</p><ol><li>主播端发起创建房间的信令后，在信令服务器中创建房间并返回一个流媒体云地址。</li><li>主播采集音视频数据形成rtmp流，推送到CDN网络中。</li><li>观众从在信令服务器中查看房间某个房间，信令服务器返回一个rtmp流媒体云地址。</li><li>观众从cdn网络拉流得到视频。</li></ol><h2 id="1-2-实时互动直播"><a href="#1-2-实时互动直播" class="headerlink" title="1.2 实时互动直播"></a>1.2 实时互动直播</h2><p>实时互动直播相较于泛娱乐化直播，对信息的实时性要求较高，因此网络延迟要求更小，响应速度更快。因此，它的架构就更加复杂。</p><p>在泛娱乐化直播基础上，在推拉流以及信令服务器与用户之间增加一层自有网络。</p><p>自有网络与用户之间通常采用UDP协议，UDP协议不要求数据必须经过重传重组等等一系列子协议来保证信息准确的到达，用户收到与收不到服务器都按顺序发数据包不做重传，这可以极大的提高信息的实时性。</p><p>使用一个控制中心，控制多个<code>信令/流媒体节点</code>进行负载均衡，使得实时信息的传输具有高可用高容错性。</p><h2 id="1-3-CDN网络"><a href="#1-3-CDN网络" class="headerlink" title="1.3 CDN网络"></a>1.3 CDN网络</h2><p>为解决用户访问资源慢而诞生的技术</p><ol><li>边缘节点: 用户直接从距离最近的边缘节点获取数据</li><li>主干节点(二级节点): 主干节点缓存大量数据，如果边缘节点不存在数据，会从主干节点获取数据。</li><li>源站: CP(内容提供方)将内容放在源站</li></ol><p>如果用户在边缘节点没有获取到数据，将会向上级请求(主干节点)，仍然获取不到时，就会从源站直接请求。</p><p>通常，会使用至少两个主干节点将两个不同ISP的网络连接在一起。例如，一个网络是电信，另一个网络是网通，通过这个方式可以使得电信、网通用户互通。</p><h1 id="二、音频基础"><a href="#二、音频基础" class="headerlink" title="二、音频基础"></a>二、音频基础</h1><p>自然界的一切音频满足三大要素，称为声音的三要素</p><ol><li>频率: 频率也就是音频，儿童 &gt; 女生 &gt; 男生</li><li>振幅: 振动的幅度，表示声音的大小</li><li>波形: 波形代表音色，与材质相关，本质是谐波。</li></ol><h2 id="2-1-声音三要素"><a href="#2-1-声音三要素" class="headerlink" title="2.1 声音三要素"></a>2.1 声音三要素</h2><p>音量也就是振幅，振幅不同表现音量的大小不同，具体波形图如下:<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sapb3scpj31700cedgv.jpg" alt="波形1"></p><p>当振幅相同时，频率的不同使得声音听起来有音调的区别，频率高音调高，也就是越发像儿童和女生，频率低音调低，就更像男生的声音。<br><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g0yn1vy08yj30pi07uwfr.jpg" alt="波形2"></p><p>声音传播正弦波实际上并不是非常平滑的，在波形上可能会有些许畸变，使得每个人的音色听起来都稍许不同。<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4saq6szhbj30pi07u3zo.jpg" alt="谐波"></p><h2 id="2-2-心理声学原理"><a href="#2-2-心理声学原理" class="headerlink" title="2.2 心理声学原理"></a>2.2 心理声学原理</h2><p>人类通常可听到的声波就是20Hz ~ 20kHz, 因此，当我们需要对一个音频做压缩时，就可以根据人类可听声波的范围去相对应的做裁剪， 下面是人类的听觉范围。<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4saqir87sj311e05s3yz.jpg" alt="人类听觉范围"></p><p>其他动物听觉/发声范围与人类的比较:<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4saqv4e4kj30x40eajt3.jpg" alt="动物听觉范围"></p><p>可以看得出，比如人类正常的说话声音蝙蝠是听不到的，狗狗能听到更低频率的声音能更快的发现例如地震的灾害等。</p><h2 id="2-3-音频量化"><a href="#2-3-音频量化" class="headerlink" title="2.3 音频量化"></a>2.3 音频量化</h2><p>为了将模拟信号数字化，需要对采集到的模拟信号数字化，具体分为采样、量化和编码三个步骤。下面来看音频量化的过程:<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g4sar8vmooj30mo0ms764.jpg" alt="音频量化的过程"></p><p>这里需要讲解几个量化的基本概念:</p><ul><li>采样大小: 一个采样用多少bit存放，常用的是16bit，它所能满足的最大振幅大小是2^16=65535，例如上图，所描述的采用大小就是3bit，可采集的最大振幅是2^3 = 8</li><li>采样率: 指每秒钟的采样频率，通常有8K、16K、32K、44.1K、48K。例如，20KHz的声音使用40K采样率进行采样，声音每次振动被采样40/20=2次。因此，在相同的采样率下，越高频的声音采样次数就会越少，声音的信息就会越不详细。</li><li>声道数: 单声道、双声道、多声道</li></ul><p>有了这几个量化的概念，我们就可以轻松的算出码率， 计算一个PCM音频流的码率，只需要使用<code>采样率×采样大小×声道数</code>即可。</p><p>例如，一个双声道的PCM编码的WAV文件，采样率为44.1KHz、采样大小16bit，那么它的码率就是<code>44.1K*16*2=1411.2Kb/s</code>，对其再做例如AC这种编码压缩后，最终的码率大概是128Kb/s。</p><h2 id="2-4-音频压缩技术"><a href="#2-4-音频压缩技术" class="headerlink" title="2.4 音频压缩技术"></a>2.4 音频压缩技术</h2><p>音频采集后会有大量的冗余信息导致不必要的空间浪费，使用一定程度的压缩是非常有必要的，音频的压缩技术主要有两种。</p><ol><li>消除冗余数据: 将人类不能识别的数据直接删除掉，是有损的。</li><li>哈夫曼无损编码: 是一种无损压缩技术，在消除冗余的基础上再做。</li></ol><p>冗余信息包括如上述说到的人的听觉范围之外的声音，以及被掩蔽掉的音频信号。</p><p>音频信号的掩蔽可分为频域掩蔽和时域掩蔽。</p><ol><li>频域掩蔽效应<br>1) 实际上20Hz~20KHz之间的频率也不是所有都能被人类听到，还跟其振幅大小有关，例如图上的Threshold in Quiet曲线。<br>2) 同时当一个突然的大振幅的采样出现时，周围的一些小振幅采样就会被掩蔽，如图中标记的红色矩形和被遮蔽的紫色矩形。</li></ol><p><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sarkg5a3j30qs0mm409.jpg" alt="频域遮蔽"></p><ol start="2"><li>时域遮蔽效应<br>1) 在相同时段内，有一个振幅更大的声音和一个振幅更小的声音，那么振幅更大的声音将遮蔽振幅更小的声音<br>2) 在一个连续的大振幅声波出现之前50ms左右，和之后100ms~200ms的声音也会被遮蔽，如图的pre和post-marking所示。</li></ol><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4sartbtdmj30x60g6dh7.jpg" alt="时域遮蔽"></p><h3 id="2-4-2-音频编码"><a href="#2-4-2-音频编码" class="headerlink" title="2.4.2 音频编码"></a>2.4.2 音频编码</h3><p>音频编码的过程大体上可以使用下面的图片来表示，量化的编码依赖于心理声学模型、时域到频域转换而来，随后结合辅助数据转化为比特流格式化。<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4sasapmugj314k09yaav.jpg" alt="音频编码过程"></p><h2 id="2-5-音频编解码器"><a href="#2-5-音频编解码器" class="headerlink" title="2.5 音频编解码器"></a>2.5 音频编解码器</h2><p>常见的音频编解码器包括OPUS、AAC、Vorbis、Speex、iLBC、AMR、G.711等。</p><p>如下是常见的音频编解码器性能对比图<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sasj8b4cj30pm0jowge.jpg" alt="音频编解码器"></p><p>具体的评测结果显示，各个编解码器的能力中，OPUS &gt; AAC &gt; Vorbis</p><p>通常来说，现代的直播系统里，对实时性要求高时，就会采用Opus。对于泛娱乐化直播、对音质要求高时，采用AAC编码，因为通常采用的是RTMP流，它并不支持Opus。如果需要两个编码器融合，则需要在中间层做互转。如果与电话系统互联，则还需要融合G.722、G.711编码器等等。</p><h3 id="2-5-1-AAC编码"><a href="#2-5-1-AAC编码" class="headerlink" title="2.5.1 AAC编码"></a>2.5.1 AAC编码</h3><p>市面上大量的直播系统都采用AAC编码，同时RTMP流也对AAC有较好的支持，但并不支持Opus编码。</p><p>AAC(Advanced Audio Coding)目的是取代MP3格式，MP3压缩后会产生比较多的损耗。<code>MPEG-4</code>标准诞生后，AAC结合SBR技术与PS技术，编码后所产生的损耗较小但压缩比更高。</p><p>目前常用的规格有AAC LC、AAC HE V1、AAC HE V2三种<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sast4frvj30mg0esabn.jpg" alt="AAC编码版本图1"></p><p>由上图可知，AAC版本间的关系:</p><ol><li>AAC HE V1 = AAC LC + SBR</li><li>AAC HE V2 = AAC HE V1 + PS</li></ol><p>下面来具体看这三个规格的具体描述:</p><ul><li>AAC LC: (Low Complexity) 低复杂度, 码流128k</li><li>AAC HE: AAC LC + SBR(Spectral Band Replication) ，SBR技术将频谱切分开，低频与高频采用不同的手段处理，不但减少了文件大小又很好的保存了音质，码流64k</li><li>AAC HE V2: 增加了PS(Parametric Stereo)技术，双声道分别保存，一个声道保存完整声音、一个声道保存差异。使得两个声道不需要完全相同，更大减少了体积，码流32k;</li></ul><h3 id="2-5-2-AAC编码的主要格式"><a href="#2-5-2-AAC编码的主要格式" class="headerlink" title="2.5.2 AAC编码的主要格式"></a>2.5.2 AAC编码的主要格式</h3><ul><li>ADIF: 这种格式将码流相关信息存储在头部，每次解码从头部获取信息。</li><li>ADTS: 每一个帧加一个同步字，可以在音频流的任何位置开始解码，它类似于数据流格式。使得流式传输的时候，可以实时解析流媒体。</li></ul><h3 id="2-5-3-AAC编解码库"><a href="#2-5-3-AAC编解码库" class="headerlink" title="2.5.3 AAC编解码库"></a>2.5.3 AAC编解码库</h3><p>AAC常见的编解码库，根据编码效率排序如下 Libfdk_AAC &gt; ffmpeg AAC &gt; libfaac &gt; libvo_aacenc</p><h1 id="三、视频基础"><a href="#三、视频基础" class="headerlink" title="三、视频基础"></a>三、视频基础</h1><h2 id="3-1-H264基本概念"><a href="#3-1-H264基本概念" class="headerlink" title="3.1 H264基本概念"></a>3.1 H264基本概念</h2><ul><li>I帧: 关键帧，采用帧内压缩技术</li><li>P帧: 向前参考帧，压缩时只保存差异，差异参考前一个帧，解码时与前一帧相关，属于帧间压缩技术。</li><li>B帧: 双向参考帧，压缩时既参考前一帧也参考后一帧，压缩比率更高，不太适用于实时互动的直播，属于帧间压缩技术。</li></ul><p>下面来看一组帧的构成, 一组帧通常写作GOF(Group of Frame)或称为GOP(Group of Picture)<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4sat41g7sj30xa0d8jta.jpg" alt="GOF"></p><p>GOF有2个需要参考的重要参数集SPS与PPS</p><ul><li>SPS: (Sequence Parameter Set) 序列参数集，存放帧数、参考帧数目、解码图像尺寸、帧场编码模式选择标识等。</li><li>PPS: (Picture Parameter Set) 图像参数集，存放图像相关参数。</li></ul><p>知道了GOF的概念，就可以分析视频花屏或卡帧的原因</p><ol><li>GOP分组的P帧丢失，造成解码端图像发生错误</li><li>为了避免花屏问题的发生，在丢失了P帧或I帧时，就不显示整组GOP的所有帧，直到下一个I帧的到来，这就造成了卡屏。</li></ol><h2 id="3-2-常用的视频编解码器"><a href="#3-2-常用的视频编解码器" class="headerlink" title="3.2 常用的视频编解码器"></a>3.2 常用的视频编解码器</h2><ul><li>x264/x265: 性能比较强，x265的压缩比率更高，直播系统中如果采用x265，解码端CPU的消耗也会更大。</li><li>openH264: 支持SVC技术传输，将图像分层，每加一层图像就更加清晰。这个技术使用软件解码，不使用硬件解码。</li><li>vp8/vp9: vp8对应x264，vp9对应x265</li></ul><h2 id="3-3-H264编码原理"><a href="#3-3-H264编码原理" class="headerlink" title="3.3 H264编码原理"></a>3.3 H264编码原理</h2><h3 id="3-3-1-H264压缩技术"><a href="#3-3-1-H264压缩技术" class="headerlink" title="3.3.1 H264压缩技术"></a>3.3.1 H264压缩技术</h3><p>H264主要的压缩方式有以下几个大类</p><ul><li>帧内预测压缩，解决的是空域数据冗余问题，比如一些人不敏感的色彩、亮度等数据，可以被删除。</li><li>帧间预测压缩，两个帧之间大量数据是相同的，只需要保留差异而不需要每一帧都存放完整内容。</li><li>整数离散余弦变换(DCT)，将空间上的相关性变为频域上无关的数据然后进行量化。将一个复杂的波形图变为多个正弦波，使得数据可以进行量化处理。</li><li>CABAC压缩，类似于哈夫曼编码，但压缩率更高。</li></ul><h4 id="3-3-1-1-宏块划分"><a href="#3-3-1-1-宏块划分" class="headerlink" title="3.3.1.1 宏块划分"></a>3.3.1.1 宏块划分</h4><p>在压缩之前，需要知道如何对图像做一个宏块划分， 比如如图划分一个8x8的宏块<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g4satj6qrxj31ae0d4q48.jpg" alt="宏块划分"><br>将图进行划分后，图像变为<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g4satxe3g4j30wq0iegnl.jpg" alt="宏块划分结果"><br>划分出了宏块后，还需要再对宏块做子块划分，如下图所示<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g4saucgowcj31800cuq4v.jpg" alt="子块划分"><br>如图，子块划分将颜色分开，例如图中的纯蓝色部分，和带黑色部分，纯蓝色部分颜色单一只需要用很小的数据来表示即可，使得压缩比率更大。</p><p>知道了宏块划分和子块划分后，还需要知道帧的分组，比如下图所示<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4sav3uxxwj30v40higmj.jpg" alt="帧分组"><br>一个白色小球在平面内移动，每一帧的移动范围都很小，图像块的变化不大，这样的一组数据就可以划分到一组。</p><h4 id="3-3-1-2-帧间预测压缩技术-组内宏块查找"><a href="#3-3-1-2-帧间预测压缩技术-组内宏块查找" class="headerlink" title="3.3.1.2 帧间预测压缩技术(组内宏块查找)"></a>3.3.1.2 帧间预测压缩技术(组内宏块查找)</h4><p>对划分出来的一个帧分组，做组内宏块查找，如图<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4savdf2anj30v80hw75f.jpg" alt="组内宏块查找"><br>对一张图查找小球出现的位置，相邻图片从该小球附近位置开始查找，对整组图片做相同操作，可以得到小球的运动轨迹的估算。<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4saxaexxlj31700cedgv.jpg" alt="运动估算"><br>随后对小球做运动矢量与补偿压缩，即可用很小的数据来表示小球的运动，这就属于帧间预测压缩技术。</p><h4 id="3-3-1-3-帧内压缩技术"><a href="#3-3-1-3-帧内压缩技术" class="headerlink" title="3.3.1.3 帧内压缩技术"></a>3.3.1.3 帧内压缩技术</h4><p>帧内压缩技术对同一张图片内的各个块做划分，将每一种图形用编号表示<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4saxipsffj318k0csmyy.jpg" alt="帧内压缩技术"><br>使用这种方式，预测还原出的图像，带有一定损失<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4saxpcj6bj315c0bwtaq.jpg" alt="预测图像"><br>随后，对预测图像和原图图像做差异计算，最后使用预测的模式信息和残差值来表示一张图。计算机通过预测模式信息还原图像，再使用残差值将图像还原到近似原图，是一种非常高效的压缩方式。</p><h4 id="3-3-1-4-DCT压缩"><a href="#3-3-1-4-DCT压缩" class="headerlink" title="3.3.1.4 DCT压缩"></a>3.3.1.4 DCT压缩</h4><p>通过DCT算法，将数据进行压缩。</p><h4 id="3-3-1-5-VLC压缩"><a href="#3-3-1-5-VLC压缩" class="headerlink" title="3.3.1.5 VLC压缩"></a>3.3.1.5 VLC压缩</h4><p>使用类似哈夫曼编码的技术，将频率高的编码为短码，频率低的编码为长码。<br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g4saxx5g14j317i0cgdhh.jpg" alt="VLC压缩"></p><p>同时，H264使用的Context Adaptive技术，使得编码能够实时的通过上下文适应进行压缩比更强的压缩。</p><h3 id="3-3-2-H264结构图与码流"><a href="#3-3-2-H264结构图与码流" class="headerlink" title="3.3.2 H264结构图与码流"></a>3.3.2 H264结构图与码流</h3><p>每一帧图像由多个片组成，每个片由多个宏块组成，而宏块又由子块组成。<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4say4gb09j30rq0hat9f.jpg" alt="H264结构图"></p><p>H264编码可分层为NAL层、VCL层。</p><ul><li>NAL层: Network Abstraction Layer， 视频数据抽象层，完成视频传输的拆包租包等。</li><li>VCL层: Video Coding Layer，视频数据编码层。</li></ul><p>码流的概念有SODB、RBSP、EBSP、NALU</p><ul><li>SODB: String of Data Bits 原始数据流，长度不一定是8的倍数，它是由VCL层产生的。</li><li>RBSP: Raw Byte Sequence 该算法在SODB末尾位补1，如果字节数不足8，补0。</li><li>EBSP: Encapsulate Byte Sequence Payload 压缩流的开头增加起始位, 比如0x0001、0x000001，如果数据中包含连续的0x00 00则增加一个0x03以防止被当做起始位来处理。</li><li>NALU: NAL Unit, 在EBSP基础上增加一个1字节的头.<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4sayd3f3mj30q40d6abc.jpg" alt="NALU"><br>表示NAL层中一个H264帧是由多个切片组成的，一次传输不能全部完整的传完，需要做切片，<strong>每个H264帧至少包含一个切片</strong></li></ul><p>切片(Slice)与宏块(MarckBlock, MB)的关系<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4sayk6707j30vs0gajsh.jpg" alt="切片与宏块"></p><p>一帧对应切片的关系<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4sayr0niqj30o40himy1.jpg" alt="帧与切片"></p><p>H264码流分层结构图<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sayyla5pj30wr0u0761.jpg" alt="码流分层结构"></p><h3 id="3-3-3-NAL-Unit详解"><a href="#3-3-3-NAL-Unit详解" class="headerlink" title="3.3.3 NAL Unit详解"></a>3.3.3 NAL Unit详解</h3><p>一个NALU头由1个字节组成<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------+</span><br><span class="line">|0|1|2|3|4|5|6|7|</span><br><span class="line">+-+-+-+-+-+-+-+-+</span><br><span class="line">|F|NRI|  Type   |</span><br><span class="line">+---------------+</span><br></pre></td></tr></table></figure><p></p><ol><li>F: <code>forbidden_zero_bit</code> 在H264协议中规定该位必须为0</li><li>NRI: <code>nal_ref_idc</code> 2bit, 取00~11表示这个NALU的重要程度，值越大则越重要。如果当前NAL是参考帧的片或是序列参数集、图像参数集这些不可被忽视的重要数据，那么NRI值必须大于0。(一般都不使用这个参数)</li><li>Type: <code>nal_unit_type</code> 表示一个NALU单元的类型 1~12由H264使用、24~31由H264以外的协议使用。</li></ol><table><thead><tr><th>Type值</th><th>意义</th></tr></thead><tbody><tr><td>0</td><td>没有定义</td></tr><tr><td>1-23</td><td>NAL单元 单个NAL单元包</td></tr><tr><td>1</td><td>不分区，非IDR图像的片</td></tr><tr><td>2</td><td>片分区A</td></tr><tr><td>3</td><td>片分区B</td></tr><tr><td>4</td><td>片分区C</td></tr><tr><td>5</td><td>IDR图像中的片(I帧的片)</td></tr><tr><td>6</td><td>补充增强信息单元（SEI）</td></tr><tr><td>7</td><td>SPS 序列参数集</td></tr><tr><td>8</td><td>PPS 图像参数集</td></tr><tr><td>9</td><td>序列结束</td></tr><tr><td>10</td><td>序列结束</td></tr><tr><td>11</td><td>码流借宿</td></tr><tr><td>12</td><td>填充</td></tr><tr><td>13-23</td><td>保留</td></tr><tr><td>24</td><td>STAP-A, 单一时间的组合包</td></tr><tr><td>25</td><td>STAP-B, 单一时间的组合包</td></tr><tr><td>26</td><td>MTAP16, 多个时间的组合包</td></tr><tr><td>27</td><td>MTAP24, 多个时间的组合包</td></tr><tr><td>28</td><td>FU-A, 分片的单元</td></tr><tr><td>29</td><td>FU-B, 分片的单元</td></tr><tr><td>30-31</td><td>没有定义</td></tr></tbody></table><p>NAL的类型还可分为单一类型、组合类型、分片类型</p><ul><li><p>单一类型: 一个RTP包只包含一个NALU(P帧、B帧)<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sazc8x1xj311u0gm3zv.jpg" alt="单一类型RTP包"></p></li><li><p>组合类型: 一个RTP包包含了多个NALU，类型是24~27，SPS、PPS通常放在一个NALU中，因为字节较小。<br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g4sazlnowuj30xw0l076g.jpg" alt="组合类型RTP包"></p></li><li><p>分片类型: 一个NALU单元分为多个RTP包，类型是28、29.<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g4saztj4d7j311u0gojsy.jpg" alt="分片类型"></p></li></ul><p>可以看出，分片NALU的RTP包头部明显不同，FU indicator表示分片指示符，下面来看看FU Header<br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4sb01ban6j30cm07u3yp.jpg" alt="FU Header"></p><ul><li>S: start bit 指明一个分片的开始</li><li>E: end bit 指明一个分片的结束</li><li>R: 未使用，设置为0</li><li>Type 指明分片NAL类型<br>接收数据时，根据分片的RTP包序号进行重组</li></ul><h2 id="3-4-色彩空间"><a href="#3-4-色彩空间" class="headerlink" title="3.4 色彩空间"></a>3.4 色彩空间</h2><h3 id="3-4-1-RGB"><a href="#3-4-1-RGB" class="headerlink" title="3.4.1 RGB"></a>3.4.1 RGB</h3><h3 id="3-4-2-YUV"><a href="#3-4-2-YUV" class="headerlink" title="3.4.2 YUV"></a>3.4.2 YUV</h3><p>YUV(YCbCr)是电视系统采用的一种颜色编码方式</p><ul><li>Y是灰阶，也就是明亮度。</li><li>U和V表示色度，UV用来描述影像色彩及饱和度，它们用于指定像素的颜色。</li></ul><p>常见的YUV格式，比例分别表示Y、U、V所需要的bit数</p><ul><li>YUV4:2:0</li><li>YUV4:2:2</li><li>YUV4:4:4</li></ul><p>现在主要采用的是YUV4:2:0，它并不表示该编码只有Y、Cb两种分量，而没有Cr分量。而是表示，对每行扫描线而言，只有一种色度分量，相邻的扫描行存储不同的色度分量，它以2:1的抽样率存储，如果第一行是4:2:0、那么第二行就是4:0:2、再下一行4:2:0…以此类推。</p><p>YUV的存储格式</p><ul><li>planar(平面存储)<br>1) I420: YYYYYYYY UU VV (YUV420P)<br>2) YV12: YYYYYYYY VV UU (YUV420P)</li><li>packed(打包存储)<br>1) NV12: YYYYYYYY UVUV (YUV420SP)<br>2) NV21: YYYYYYYY VUVU (YUV420SP)</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/音视频技术/" rel="tag"># 音视频技术</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/network/tcp-ip/network-congestion-control.html" rel="next" title="【计算机网络】拥塞控制"><i class="fa fa-chevron-left"></i> 【计算机网络】拥塞控制</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/音视频技术/ffmpeg/av-ffmpeg-base.html" rel="prev" title="【音视频处理】ffmpeg基础">【音视频处理】ffmpeg基础 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jobscn</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">17</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:jobscn@foxmail.com" target="_blank" title="邮箱"><i class="fa fa-fw fa-envelope"></i>邮箱</a> </span><span class="links-of-author-item"><a href="https://weibo.com/jobsch" target="_blank" title="微博"><i class="fa fa-fw fa-globe"></i>微博</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、直播架构"><span class="nav-number">1.</span> <span class="nav-text">一、直播架构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-泛娱乐化直播"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 泛娱乐化直播</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-实时互动直播"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 实时互动直播</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-CDN网络"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 CDN网络</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、音频基础"><span class="nav-number">2.</span> <span class="nav-text">二、音频基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-声音三要素"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 声音三要素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-心理声学原理"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 心理声学原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-音频量化"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 音频量化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-音频压缩技术"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 音频压缩技术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-音频编码"><span class="nav-number">2.4.1.</span> <span class="nav-text">2.4.2 音频编码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-音频编解码器"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 音频编解码器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-1-AAC编码"><span class="nav-number">2.5.1.</span> <span class="nav-text">2.5.1 AAC编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-2-AAC编码的主要格式"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.5.2 AAC编码的主要格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-3-AAC编解码库"><span class="nav-number">2.5.3.</span> <span class="nav-text">2.5.3 AAC编解码库</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、视频基础"><span class="nav-number">3.</span> <span class="nav-text">三、视频基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-H264基本概念"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 H264基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-常用的视频编解码器"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 常用的视频编解码器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-H264编码原理"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 H264编码原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-H264压缩技术"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 H264压缩技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-1-宏块划分"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">3.3.1.1 宏块划分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-2-帧间预测压缩技术-组内宏块查找"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">3.3.1.2 帧间预测压缩技术(组内宏块查找)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-3-帧内压缩技术"><span class="nav-number">3.3.1.3.</span> <span class="nav-text">3.3.1.3 帧内压缩技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-4-DCT压缩"><span class="nav-number">3.3.1.4.</span> <span class="nav-text">3.3.1.4 DCT压缩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-5-VLC压缩"><span class="nav-number">3.3.1.5.</span> <span class="nav-text">3.3.1.5 VLC压缩</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2-H264结构图与码流"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 H264结构图与码流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-3-NAL-Unit详解"><span class="nav-number">3.3.3.</span> <span class="nav-text">3.3.3 NAL Unit详解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-色彩空间"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 色彩空间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-RGB"><span class="nav-number">3.4.1.</span> <span class="nav-text">3.4.1 RGB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-YUV"><span class="nav-number">3.4.2.</span> <span class="nav-text">3.4.2 YUV</span></a></li></ol></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Jobscn</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv"><i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html>